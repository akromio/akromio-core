use (
  {ms} = util
  ConstStage
  StageParser
)

/**
 * A parser for parsing stages associated a const starters.
 */
export struct ConstStageParser: StageParser
  @override @hidden
  pub fn _parse(decl: map) -> stage: map
    # (1) parse base
    stage = decl{*, interval = ms(decl.interval or "1s")}

    # (2) check schema
    if stage is not ConstStage then
      throw(TypeError($"Const stage schema not valid: ${fmt(decl)}."))
