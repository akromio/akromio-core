use (
  alias://expected
  {monitor} = alias://doubles

  ../BlankSheetStream
  SleepStarter, StarterState
)

suite(__filename, proc()
  suite("generateBlankSheets()", proc()
    test("when called, nothing must be added to the stream", async proc()
      # (1) act
      const (
        output = monitor(BlankSheetStream(), method = "appendBlankSheet")
        opts = {interval = 50, times = 5, output}
        starter = SleepStarter(opts).start()
      )

      await(sleep("400ms"))

      # (2) assessment
      expected(starter).toHave(state = StarterState.stopped, iterations = 5)
      expected(output.writable).equalTo(false)
      
      const log = monitor.log(output, clear = true)
      expected(log.calls).equalTo(0)
    end)
  end)
end)
